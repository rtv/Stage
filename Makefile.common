############################################################################
#
# stage/Makefile.common - build and installation configurations
# Author: Richard Vaughan, Andrew Howard
#
# $Id: Makefile.common,v 1.46 2002-03-15 18:39:50 gerkey Exp $
#
# Notes: All user-configurable paths and build options should be specified 
#        here. This file is included by Makefile and src/Makefile. 
#        The defaults should be OK for most users. 
#
##############################################################################

##############################################################################
# VERSION NUMBER (required)
# Define Stage's version string for the source to include.
# Must match Player's version string

VERSION = 1.2

##############################################################################
# PLAYER CONFIGURATION (required)

PLAYER_VERSION = $(VERSION)
PLAYER_DIR = $(HOME)/player-$(PLAYER_VERSION)

##############################################################################
# INSTALLATION CONFIGURATION (required for 'make install')

# Stage will be installed under the directory INSTALL_BASE-VERSION.
# Change INSTALL_BASE if you want to install somewhere else.
# You can also specify the INSTALL_BASE from the make command line, eg:
# make install -e INSTALL_BASE=~/playerstage/stage

# By default, stage is installed in ~/stage
INSTALL_BASE = $(HOME)/stage
INSTALL_DIR = $(INSTALL_BASE)-$(VERSION)

# Rtk configuration files will be installed here
INSTALL_ETC = /usr/local/etc/rtk

SRC_DIST_NAME = Stage-$(VERSION)-src
SRC_DIST_BLEEDING_NAME = Stage-Bleeding-src
BIN_DIST_NAME = Stage-$(VERSION)-i386

INSTALL_BIN = $(INSTALL_DIR)/bin
INSTALL_BIN_FILES = src/stage src/xs src/rtkstage src/manager

INSTALL_EXAMPLES = $(INSTALL_DIR)/examples
INSTALL_LIB = $(INSTALL_DIR)/lib

#############################################################################
# 
# rtkstage needs the path to the rtk2 source tree - these defaults
# should work fine, as we now distribute rtk2 with stage

RTK_DIR = rtk2
RTK_INC = $(RTK_DIR) #/include
RTK_LIB = $(RTK_DIR) #/lib

##############################################################################
# X COLOR DATABASE CONFIGURATION (required)
# set the path to a X11-format color database, usually rgb.txt from X distro
# I should get rid of this eventually - RTV

# this is a good guess on Linux systems
COLOR_DATABASE = /usr/X11R6/lib/X11/rgb.txt

##############################################################################
# ZLIB CONFIGURATION (optional)
# Support for gzipped images; requires zlib.
# Comment out if you dont have or need zlib.

ZLIB_FLAGS = -DINCLUDE_ZLIB
ZLIB_LINK = -lz
 
##############################################################################
# Build type 
# choose one of these that suits your build (debug/profile/production)
# all targets get these flags

# production 
#CCFLAGS = -O2 
# debug
#CCFLAGS = -g3 
# debug + profile + warnings - ideal for development
CCFLAGS = -pg -g3 -Wall

# you need this link option to get profiling data
# it can be commented out for production compiles
PROFILE_LINK = -pg

#############################################################################
# Platform selection
#

# for Linux (x86 and PPC are known to work), uncomment the following line
PLAYER_PLATFORM = -DPLAYER_LINUX

# for Solaris (Sparc), uncomment the following 2 lines
#PLAYER_PLATFORM = -DPLAYER_SOLARIS
#PLATFORM_LIBS = -lxnet

# for Win32+Cygwin use this definition:
# note: this doesn't work yet, but i'm fiddling with it - RTV
#PLAYER_PLATFORM = -DPLAYER_CYGWIN

#############################################################################
# COMPILER SELECTION
#
#   normally, you'll use the standard 'g++' and 'gcc' compilers. 
CC = g++

#   however, if you're running a glibc-2.2-based system (e.g., RedHat 7.x), 
#   and you want to run the resultant binaries on a glibc-2.1-based system
#   (e.g., RedHat 6.x), then use the 'i386-glibc21-linux-g++' and
#   'i386-glibc21-linux-gcc' compilers. note that you must have installed 
#   the compatibility compiler and library packages (they are included with 
#   the RedHat 7.x distro):
#     compat-libs-6.2-3
#     compat-glibc-6.2-2.1.3.2
#     compat-egcs-c++-6.2-1.1.2.14
#     compat-libstdc++-6.2-2.9.0.14
#     compat-egcs-6.2-1.1.2.14

#CC = i386-glibc21-linux-g++

# if using the old libs you also need this in order to link properly with X
#OLDLIBS = -L/usr/i386-glibc21-linux/lib

# use the same tool to link
LINKER = $(CC)

#############################################################################
# Other useful definitions used throughout the build process
#
MAKEDEP=makedepend

#############################################################################
# CONFIGURATION FOR HRL PROPRIETARY CODE 
# uncomment these lines to build support for HRL devices
#
#HRL_DIR = ../hrl
#HRL_FLAGS = -DHRL_HEADERS -I$(HRL_DIR)
#HRL_LINK = -L$(HRL_DIR) -lhrlstage 
